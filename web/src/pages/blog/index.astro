---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Blog | itschey.net">
	<section class="py-16 md:py-20">
		<h1 class="text-4xl font-bold tracking-tight text-neutral-900 mb-8">Blog</h1>
        <p class="text-lg text-neutral-600 mb-12 max-w-2xl">
        Posts go here.
        </p>

		<div class="grid gap-12">
			{posts.map((post) => (
				<article class="group relative flex flex-col items-start">
                    <div class="md:flex md:items-baseline md:justify-between w-full mb-2">
					    <h2 class="text-2xl font-bold text-neutral-900 group-hover:text-neutral-600 transition-colors">
                            <a href={`/blog/${post.slug}/`}>
                                <span class="absolute inset-0"></span>
                                {post.data.title}
                            </a>
                        </h2>
                        <time datetime={post.data.pubDate.toISOString()} class="md:ml-4 flex-none text-sm text-neutral-500 font-mono mt-1 md:mt-0">
                            {post.data.pubDate.toLocaleDateString('en-us', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric',
                            })}
                        </time>
                    </div>
					<p class="mt-4 text-base leading-7 text-neutral-600">
						{post.data.description}
					</p>
                    <div class="mt-4 flex items-center gap-4">
                        <span class="text-sm font-medium text-neutral-900 font-mono group-hover:text-neutral-600 transition-colors">Read &rarr;</span>
                        {post.data.tags.length > 0 && (
                            <div class="flex gap-2 relative z-10">
                                {post.data.tags.map(tag => (
                                    <span class="inline-flex items-center rounded-md bg-neutral-100 px-2 py-1 text-xs font-medium text-neutral-600 ring-1 ring-inset ring-neutral-500/10">
                                        {tag}
                                    </span>
                                ))}
                            </div>
                        )}
                    </div>
				</article>
			))}
		</div>
	</section>
</Layout>
